diff --git a/apps/kwrite/main.cpp b/apps/kwrite/main.cpp
index 9af10e521..aef4b84f0 100644
--- a/apps/kwrite/main.cpp
+++ b/apps/kwrite/main.cpp
@@ -17,7 +17,7 @@
 #include <QIcon>
 #include <QStandardPaths>
 
-extern "C" Q_DECL_EXPORT int main(int argc, char **argv)
+int main(int argc, char **argv)
 {
     /**
      * Do all needed pre-application init steps, shared between Kate and KWrite
diff --git a/apps/lib/kateapp.cpp b/apps/lib/kateapp.cpp
index a3c90b6fa..d7179a955 100644
--- a/apps/lib/kateapp.cpp
+++ b/apps/lib/kateapp.cpp
@@ -79,7 +79,7 @@
 #include <unistd.h>
 #endif
 
-#if HAVE_DAEMON
+#ifdef HAVE_DAEMON
 #include <unistd.h>
 #endif
 
